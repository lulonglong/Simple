<!doctype html>
<html lang="zh">
<head>
<meta charset="utf-8">
<meta name="keywords"
	content="上网导航,网址大全,网址导航,simple上网导航,简单导航,simple网址大全,清晰网址导航,常用网站,好简单导航,haosimple导航">
<meta name="description"
	content="Simple--简洁清晰的网址导航，为用户提供常用网址、自定义网址，提供最简单便捷的上网导航服务。">
<title>Simple 最简洁的上网导航</title>
<link rel="shortcut icon" type="image/ico" href="img/favicon.ico" />
<link rel="stylesheet" type="text/css" href="css/main.css" />
<script
	src="http://lib.sinaapp.com/js/jquery/1.10.2/jquery-1.10.2.min.js"></script>
<script
	src="http://lib.sinaapp.com/js/jquery-ui/1.10.2/jquery-ui.min.js"></script>
<script src="js/jquery.cookie.js"></script>
<script>
	/** trim() method for String */
	String.prototype.trim = function() {
		return this.replace(/(^\s*)|(\s*$)/g, '');
	};

	$(function() {
		$("#sortable").sortable({
			stop : function(event, ui) {
				$("#trashContainer").css("opacity", 0);
			},
			update : function(event, ui) {
				changeOrder();
			},
			start : function(event, ui) {
				$("#trashContainer").css("opacity", 1);
			}
		}).disableSelection();
		$("#trashContainer").droppable({
			drop : function(event, ui) {
				$(ui.draggable).remove();
				//注意删除custom
				
				$("#trash_tip").css("display", "none");
				$("#trash").css("display", "block");
			},
			out : function(event, ui) {
				$("#trash_tip").css("display", "none");
				$("#trash").css("display", "block");
			},
			over : function(event, ui) {
				$("#trash").css("display", "none");
				$("#trash_tip").css("display", "block");
			}
		});
		//search baidu or google
		$("#search").keydown(
				function(e) {
					if (e.ctrlKey == 1 && e.keyCode == 8) {
						$("#search").val("");
						return;
					}
					if (e.keyCode == 13) {
						var keyword = $("#search").val();
						if (keyword.length > 0 && keyword.charAt(0) == ' ') {
							$("#searchForm").attr("action",
									"https://www.google.com.hk/search");
							$("#search").attr("name", "q");
						} else {
							$("#searchForm").attr("action",
									"http://www.baidu.com/s");
							$("#search").attr("name", "wd");
						}
						$("#searchForm").submit();
						return false;
					}
				});
	});

	//window load
	$(document).ready(function() {
		$("#search").focus();
		loadWebSites();
		loadLogo();
	});

	//focus search action，when key space
	$(document).keyup(function(e) {
		if (e.keyCode == 32 && document.activeElement.id != "search") {
			$("#search").focus();
		}
	});

	function reset() {
		$.removeCookie("order");
		$.removeCookie("custom");
		location.reload();
	}

	function loadWebSites() {
		//$("#sortable").css("opacity", 0);
		var order = $.cookie('order');
		if (order != undefined) {
			var custom = $.cookie('custom');
			if (custom != undefined) {
				//add custom
				$($.parseJSON(custom)).each(function() {
					appendSite(this.no, this.name, this.url);
				});
			}

			//change order
			var orderObject = $.parseJSON(order)
			$(orderObject).each(function() {
				$("#sortable li[no='" + this + "']").appendTo($("#sortable"));
			});

			//remove deleted item
			var deletedCount = $("#sortable li").length - orderObject.length;
			$("#sortable li:lt(" + deletedCount + ")").remove();
		}

		//$("#sortable").css("opacity", 1);
	}

	//保存网址顺序
	function changeOrder() {
		var order = [];
		$("#sortable li").each(function() {
			order.push($(this).attr("no"));
		});
		$.cookie('order', JSON.stringify(order), {
			expires : 1000
		});
	}

	//将新网址添加到网址列表
	function appendSite(no, name, url) {
		$("#sortable")
				.append(
						'<li no="'+no+'"><a href="http://'
								+ url
								+ '" target="_blank" style="background: url(http://cdn.website.h.qhimg.com/index.php?domain='
								+ url
								+ ') no-repeat 0px;-webkit-background-size:16px 16px;-o-background-size:16px 16px;background-size:16px 16px;">'
								+ name + '</a></li>');
	}

	//获取添加网址中的最大编号
	function getCustomMaxNo() {
		var defaultCustomNo = 10000;
		var custom = $.cookie('custom');
		if (custom == undefined)
			return defaultCustomNo;

		$($.parseJSON(custom)).each(function() {
			if (this.no > defaultCustomNo)
				defaultCustomNo = this.no;
		});
		return defaultCustomNo;
	}

	function loadLogo() {
		var colorArray = [ "#45b97c", "green", "violet", "#faa755", "#6950a1",
				"#4c4c4c", "#ef5b9c" ];
		$("#logo").css("color", colorArray[new Date().getDay()]);
		$("#logo").fadeTo(1000, 1, function() {
			setTimeout(function() {
				$("#logo").fadeTo(1000, 0);
			}, 1000);
		});
	}

	//show or hide about
	function showAbout() {
		if ($("#about").is(":hidden")) {
			$('#about').show('fast');
		} else {
			$('#about').hide('fast');
		}
	}
</script>
</head>
<body>
	<div>
		<div id="head">
			<a href="#" onclick="showAbout()">帮助</a> <a href="#"
				onclick="reset()">重置</a> <a href="#" onclick="showAdd()">添加</a>
		</div>
		<div id="logo">Simple</div>
		<div id="trashContainer">
			<img id="trash" src="img/trash.png" /><img id="trash_tip"
				src="img/trash_tip.png" style="display: none" />
		</div>
		<div id="searchContainer">
			<form id="searchForm" action="http://www.baidu.com/s" target="_blank">
				<input id="search" type="text" name="wd" baiduSug="2" />
			</form>
		</div>
		<div style="margin-top: 50px">
			<ul id="sortable" class="connectedSortable">
				<li no="1"><a href="http://www.baidu.com" target="_blank"
					style="background: url(img/defaultIcon.png) no-repeat 0px 0px">百
						度</a></li>
				<li no="2"><a href="http://www.google.com" target="_blank"
					style="background: url(img/defaultIcon.png) no-repeat 0px -32px">谷
						歌</a></li>
				<li no="3"><a href="http://www.qq.com" target="_blank"
					style="background: url(img/defaultIcon.png) no-repeat 0px -64px">腾
						讯</a></li>
				<li no="4"><a href="http://www.sina.com" target="_blank"
					style="background: url(img/defaultIcon.png) no-repeat 0px -96px">新
						浪</a></li>
				<li no="5"><a href="http://www.163.com" target="_blank"
					style="background: url(img/defaultIcon.png) no-repeat 0px -128px">网
						易</a></li>
				<li no="6"><a href="http://www.dianping.com" target="_blank"
					style="background: url(img/defaultIcon.png) no-repeat 0px -160px">大众点评</a></li>
				<li no="7"><a href="http://www.jd.com" target="_blank"
					style="background: url(img/defaultIcon.png) no-repeat 0px -192px">京
						东</a></li>
				<li no="8"><a href="http://www.yhd.com" target="_blank"
					style="background: url(img/defaultIcon.png) no-repeat 0px -224px">1号店</a></li>
				<li no="9"><a href="http://www.tmall.com" target="_blank"
					style="background: url(img/defaultIcon.png) no-repeat 0px -256px">天
						猫</a></li>
				<li no="10"><a href="http://www.taobao.com" target="_blank"
					style="background: url(img/defaultIcon.png) no-repeat 0px -288px">淘
						宝</a></li>
				<li no="11"><a href="http://www.alipay.com" target="_blank"
					style="background: url(img/defaultIcon.png) no-repeat 0px -320px">支付宝</a></li>
				<li no="12"><a href="http://www.meituan.com" target="_blank"
					style="background: url(img/defaultIcon.png) no-repeat 0px -352px">美
						团</a></li>
				<li no="13"><a href="http://www.douban.com" target="_blank"
					style="background: url(img/defaultIcon.png) no-repeat 0px -384px">豆
						瓣</a></li>
				<li no="14"><a href="http://www.zhihu.com" target="_blank"
					style="background: url(img/defaultIcon.png) no-repeat 0px -416px">知
						乎</a></li>
				<li no="15"><a href="http://www.youku.com" target="_blank"
					style="background: url(img/defaultIcon.png) no-repeat 0px -448px">优
						酷</a></li>
				<li no="16"><a href="http://www.iqiyi.com/" target="_blank"
					style="background: url(img/defaultIcon.png) no-repeat 0px -480px">爱奇艺</a></li>
				<li no="17"><a href="http://www.12306.cn" target="_blank"
					style="background: url(img/defaultIcon.png) no-repeat 0px -512px">12306</a></li>
				<li no="18"><a href="http://www.qunar.com" target="_blank"
					style="background: url(img/defaultIcon.png) no-repeat 0px -544px">去哪儿</a></li>
				<li no="19"><a href="http://www.renren.com" target="_blank"
					style="background: url(img/defaultIcon.png) no-repeat 0px -576px">人人网</a></li>
				<li no="20"><a href="http://www.weibo.com" target="_blank"
					style="background: url(img/defaultIcon.png) no-repeat 0px -608px">微
						博</a></li>
				<li no="21"><a href="http://www.58.com" target="_blank"
					style="background: url(img/defaultIcon.png) no-repeat 0px -640px">58同城</a></li>
				<li no="22"><a href="http://www.anjuke.com" target="_blank"
					style="background: url(img/defaultIcon.png) no-repeat 0px -672px">安居客</a></li>
				<li no="23"><a href="http://www.soufang.com" target="_blank"
					style="background: url(img/defaultIcon.png) no-repeat 0px -704px">搜
						房</a></li>
			</ul>
		</div>
		<div id="footer">
			<img src="img/poweredby.gif" />
		</div>
	</div>
	<div id="about">
		<ol>
			<li>按空格键，可将焦点置于搜索框内; 按 Ctrl+&lt;- 键，可清空搜索框</li>
			<li>默认搜索为百度，关键词前空一格则使用google搜索</li>
			<li>网址可拖动调换位置并随意删除</li>
			<li>点击重置可恢复到最最原始的页面</li>
			<li>点击添加可自由添加您喜欢的网址</li>
			<li>看在我们连logo都省了的份上，推荐给身边的屌丝们吧<!-- <br />版权归<a
				href="http://www.cnblogs.com/luguo3000/">屌丝逆袭</a>所有 -->
			</li>
			<li>期待您的任何建议： btoprunner@126.com</li>
		</ol>
		<a style="float: right; text-decoration: none;" href="#"
			onclick="$('#about').hide('fast');">关闭</a>
	</div>
	<div id="addContainer">
		<div class="mask"></div>
		<div id="mysite">
			<div class="txt">网站名称：</div>
			<div class="site-input site-name">
				<input type="text" id="mysite-name-add" placeholder="如：Simple" />
			</div>
			<div class="txt txt-url">网址：</div>
			<div class="site-input site-url">
				<input type="text" id="mysite-url-add"
					placeholder="如：www.haosimple.com" />
			</div>
			<button onclick="add()" id="btn-site-add">添加</button>
			<img class="close" onclick="$('#addContainer').hide();"
				src="img/close.png" />
		</div>
	</div>
</body>
<script>
	var promotLoaded = false;

	//显示添加框
	function showAdd() {
		$('#addContainer').show();
		if (!promotLoaded) {
			promotLoaded = true;
			$(document.body)
					.append(
							'<script type="text/javascript" charset="utf-8" src="js/autopromot.js"/>');
		}
	}

	//添加方法
	function add() {
		var name = $("#mysite-name-add").val().trim();
		var url = $("#mysite-url-add").val().trim();
		if (name == '' || url == '') {
			alert("添加内容不能为空");
			return;
		}

		if (name.length == 2)
			name = name[0] + ' ' + name[1];

		var customArray;
		var custom = $.cookie('custom');
		if (custom == undefined)
			customArray = [];
		else
			customArray = $.parseJSON(custom);

		var currentNo = getCustomMaxNo() + 1;
		customArray.push({
			"name" : name,
			"url" : url,
			no : currentNo
		});
		//save to cookie
		$.cookie('custom', JSON.stringify(customArray), {
			expires : 1000
		});

		appendSite(currentNo, name, url);
		changeOrder();
		alert(name + " 添加成功")
	}

	//响应回车事件
	$(document).ready(function() {
		$("#mysite-name-add,#mysite-url-add").keydown(function(e) {
			// 回车键
			if (e.keyCode == 13) {
				$("#mysite-name-add,#mysite-url-add").blur();
				$("#btn-site-add").click();
			}
		});
	});
</script>
<script charset="gbk" src="http://www.baidu.com/js/opensug.js"></script>
</html>
